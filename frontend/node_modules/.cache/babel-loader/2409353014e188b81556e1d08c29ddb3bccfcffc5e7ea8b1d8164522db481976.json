{"ast":null,"code":"var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nimport React, { PureComponent } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport { debounce as r } from \"../../node_modules/ts-debounce/dist/src/index.esm.js\";\nimport { scaledToViewport, viewportToScaled } from \"../lib/coordinates.js\";\nimport { getAreaAsPNG } from \"../lib/get-area-as-png.js\";\nimport { getBoundingRect } from \"../lib/get-bounding-rect.js\";\nimport { getClientRects } from \"../lib/get-client-rects.js\";\nimport { findOrCreateContainerLayer, getWindow, isHTMLElement, getPagesFromRange, getPageFromElement } from \"../lib/pdfjs-dom.js\";\nimport styles from \"../style/PdfHighlighter.module.css.js\";\nimport { HighlightLayer } from \"./HighlightLayer.js\";\nimport { MouseSelection } from \"./MouseSelection.js\";\nimport { TipContainer } from \"./TipContainer.js\";\nconst EMPTY_ID = \"empty-id\";\nclass PdfHighlighter extends PureComponent {\n  constructor(props) {\n    super(props);\n    __publicField(this, \"state\", {\n      ghostHighlight: null,\n      isCollapsed: true,\n      range: null,\n      scrolledToHighlightId: EMPTY_ID,\n      isAreaSelectionInProgress: false,\n      tip: null,\n      tipPosition: null,\n      tipChildren: null\n    });\n    __publicField(this, \"viewer\");\n    __publicField(this, \"resizeObserver\", null);\n    __publicField(this, \"containerNode\", null);\n    __publicField(this, \"containerNodeRef\");\n    __publicField(this, \"highlightRoots\", {});\n    __publicField(this, \"unsubscribe\", () => {});\n    __publicField(this, \"attachRef\", eventBus => {\n      var _a;\n      const {\n        resizeObserver: observer\n      } = this;\n      this.containerNode = this.containerNodeRef.current;\n      this.unsubscribe();\n      if (this.containerNode) {\n        const {\n          ownerDocument: doc\n        } = this.containerNode;\n        eventBus.on(\"textlayerrendered\", this.onTextLayerRendered);\n        eventBus.on(\"pagesinit\", this.onDocumentReady);\n        doc.addEventListener(\"selectionchange\", this.onSelectionChange);\n        doc.addEventListener(\"keydown\", this.handleKeyDown);\n        (_a = doc.defaultView) == null ? void 0 : _a.addEventListener(\"resize\", this.debouncedScaleValue);\n        if (observer) observer.observe(this.containerNode);\n        this.unsubscribe = () => {\n          var _a2;\n          eventBus.off(\"pagesinit\", this.onDocumentReady);\n          eventBus.off(\"textlayerrendered\", this.onTextLayerRendered);\n          doc.removeEventListener(\"selectionchange\", this.onSelectionChange);\n          doc.removeEventListener(\"keydown\", this.handleKeyDown);\n          (_a2 = doc.defaultView) == null ? void 0 : _a2.removeEventListener(\"resize\", this.debouncedScaleValue);\n          if (observer) observer.disconnect();\n        };\n      }\n    });\n    __publicField(this, \"hideTipAndSelection\", () => {\n      this.setState({\n        tipPosition: null,\n        tipChildren: null\n      });\n      this.setState({\n        ghostHighlight: null,\n        tip: null\n      }, () => this.renderHighlightLayers());\n    });\n    __publicField(this, \"renderTip\", () => {\n      const {\n        tipPosition,\n        tipChildren\n      } = this.state;\n      if (!tipPosition) return null;\n      const {\n        boundingRect,\n        pageNumber\n      } = tipPosition;\n      const page = {\n        node: this.viewer.getPageView((boundingRect.pageNumber || pageNumber) - 1).div,\n        pageNumber: boundingRect.pageNumber || pageNumber\n      };\n      const pageBoundingClientRect = page.node.getBoundingClientRect();\n      const pageBoundingRect = {\n        bottom: pageBoundingClientRect.bottom,\n        height: pageBoundingClientRect.height,\n        left: pageBoundingClientRect.left,\n        right: pageBoundingClientRect.right,\n        top: pageBoundingClientRect.top,\n        width: pageBoundingClientRect.width,\n        x: pageBoundingClientRect.x,\n        y: pageBoundingClientRect.y,\n        pageNumber: page.pageNumber\n      };\n      return /* @__PURE__ */jsx(TipContainer, {\n        scrollTop: this.viewer.container.scrollTop,\n        pageBoundingRect,\n        style: {\n          left: page.node.offsetLeft + boundingRect.left + boundingRect.width / 2,\n          top: boundingRect.top + page.node.offsetTop,\n          bottom: boundingRect.top + page.node.offsetTop + boundingRect.height\n        },\n        children: tipChildren\n      });\n    });\n    __publicField(this, \"onTextLayerRendered\", () => {\n      this.renderHighlightLayers();\n    });\n    __publicField(this, \"scrollTo\", highlight => {\n      const {\n        pageNumber,\n        boundingRect,\n        usePdfCoordinates\n      } = highlight.position;\n      this.viewer.container.removeEventListener(\"scroll\", this.onScroll);\n      const pageViewport = this.viewer.getPageView(pageNumber - 1).viewport;\n      const scrollMargin = 10;\n      this.viewer.scrollPageIntoView({\n        pageNumber,\n        destArray: [null, {\n          name: \"XYZ\"\n        }, ...pageViewport.convertToPdfPoint(0, scaledToViewport(boundingRect, pageViewport, usePdfCoordinates).top - scrollMargin), 0]\n      });\n      this.setState({\n        scrolledToHighlightId: highlight.id\n      }, () => this.renderHighlightLayers());\n      setTimeout(() => {\n        this.viewer.container.addEventListener(\"scroll\", this.onScroll);\n      }, 100);\n    });\n    __publicField(this, \"onDocumentReady\", () => {\n      const {\n        scrollRef\n      } = this.props;\n      this.handleScaleValue();\n      scrollRef(this.scrollTo);\n    });\n    __publicField(this, \"onSelectionChange\", () => {\n      const container = this.containerNode;\n      if (!container) {\n        return;\n      }\n      const selection = getWindow(container).getSelection();\n      if (!selection) {\n        return;\n      }\n      const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n      if (selection.isCollapsed) {\n        this.setState({\n          isCollapsed: true\n        });\n        return;\n      }\n      if (!range || !container || !container.contains(range.commonAncestorContainer)) {\n        return;\n      }\n      this.setState({\n        isCollapsed: false,\n        range\n      });\n      this.debouncedAfterSelection();\n    });\n    __publicField(this, \"onScroll\", () => {\n      const {\n        onScrollChange\n      } = this.props;\n      onScrollChange();\n      this.setState({\n        scrolledToHighlightId: EMPTY_ID\n      }, () => this.renderHighlightLayers());\n      this.viewer.container.removeEventListener(\"scroll\", this.onScroll);\n    });\n    __publicField(this, \"onMouseDown\", event => {\n      if (!(event.target instanceof Element) || !isHTMLElement(event.target)) {\n        return;\n      }\n      if (event.target.closest(\"#PdfHighlighter__tip-container\")) {\n        return;\n      }\n      this.hideTipAndSelection();\n    });\n    __publicField(this, \"handleKeyDown\", event => {\n      if (event.code === \"Escape\") {\n        this.hideTipAndSelection();\n      }\n    });\n    __publicField(this, \"afterSelection\", () => {\n      const {\n        onSelectionFinished\n      } = this.props;\n      const {\n        isCollapsed,\n        range\n      } = this.state;\n      if (!range || isCollapsed) {\n        return;\n      }\n      const pages = getPagesFromRange(range);\n      if (!pages || pages.length === 0) {\n        return;\n      }\n      const rects = getClientRects(range, pages);\n      if (rects.length === 0) {\n        return;\n      }\n      const boundingRect = getBoundingRect(rects);\n      const viewportPosition = {\n        boundingRect,\n        rects,\n        pageNumber: pages[0].number\n      };\n      const content = {\n        text: range.toString()\n      };\n      const scaledPosition = this.viewportPositionToScaled(viewportPosition);\n      this.setTip(viewportPosition, onSelectionFinished(scaledPosition, content, () => this.hideTipAndSelection(), () => this.setState({\n        ghostHighlight: {\n          position: scaledPosition\n        }\n      }, () => this.renderHighlightLayers())));\n    });\n    __publicField(this, \"debouncedAfterSelection\", r(this.afterSelection, 500));\n    __publicField(this, \"handleScaleValue\", () => {\n      if (this.viewer) {\n        this.viewer.currentScaleValue = this.props.pdfScaleValue;\n      }\n    });\n    __publicField(this, \"debouncedScaleValue\", r(this.handleScaleValue, 500));\n    if (typeof ResizeObserver !== \"undefined\") {\n      this.resizeObserver = new ResizeObserver(this.debouncedScaleValue);\n    }\n    this.containerNodeRef = React.createRef();\n  }\n  componentDidMount() {\n    this.init();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.pdfDocument !== this.props.pdfDocument) {\n      this.init();\n      return;\n    }\n    if (prevProps.highlights !== this.props.highlights) {\n      this.renderHighlightLayers();\n    }\n  }\n  async init() {\n    const {\n      pdfDocument\n    } = this.props;\n    const pdfjs = await import(\"../../node_modules/pdfjs-dist/web/pdf_viewer.js\");\n    const eventBus = new pdfjs.EventBus();\n    const linkService = new pdfjs.PDFLinkService({\n      eventBus,\n      externalLinkTarget: 2\n    });\n    if (!this.containerNodeRef.current) {\n      throw new Error(\"!\");\n    }\n    this.viewer = this.viewer || new pdfjs.PDFViewer({\n      container: this.containerNodeRef.current,\n      eventBus,\n      // enhanceTextSelection: true, // deprecated. https://github.com/mozilla/pdf.js/issues/9943#issuecomment-409369485\n      textLayerMode: 2,\n      removePageBorders: true,\n      linkService\n    });\n    linkService.setDocument(pdfDocument);\n    linkService.setViewer(this.viewer);\n    this.viewer.setDocument(pdfDocument);\n    this.attachRef(eventBus);\n  }\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n  findOrCreateHighlightLayer(page) {\n    const {\n      textLayer\n    } = this.viewer.getPageView(page - 1) || {};\n    if (!textLayer) {\n      return null;\n    }\n    return findOrCreateContainerLayer(textLayer.div, `PdfHighlighter__highlight-layer ${styles.highlightLayer}`, \".PdfHighlighter__highlight-layer\");\n  }\n  groupHighlightsByPage(highlights) {\n    const {\n      ghostHighlight\n    } = this.state;\n    const allHighlights = [...highlights, ghostHighlight].filter(Boolean);\n    const pageNumbers = /* @__PURE__ */new Set();\n    for (const highlight of allHighlights) {\n      pageNumbers.add(highlight.position.pageNumber);\n      for (const rect of highlight.position.rects) {\n        if (rect.pageNumber) {\n          pageNumbers.add(rect.pageNumber);\n        }\n      }\n    }\n    const groupedHighlights = {};\n    for (const pageNumber of pageNumbers) {\n      groupedHighlights[pageNumber] = groupedHighlights[pageNumber] || [];\n      for (const highlight of allHighlights) {\n        const pageSpecificHighlight = {\n          ...highlight,\n          position: {\n            pageNumber,\n            boundingRect: highlight.position.boundingRect,\n            rects: [],\n            usePdfCoordinates: highlight.position.usePdfCoordinates\n          }\n        };\n        let anyRectsOnPage = false;\n        for (const rect of highlight.position.rects) {\n          if (pageNumber === (rect.pageNumber || highlight.position.pageNumber)) {\n            pageSpecificHighlight.position.rects.push(rect);\n            anyRectsOnPage = true;\n          }\n        }\n        if (anyRectsOnPage || pageNumber === highlight.position.pageNumber) {\n          groupedHighlights[pageNumber].push(pageSpecificHighlight);\n        }\n      }\n    }\n    return groupedHighlights;\n  }\n  showTip(highlight, content) {\n    const {\n      isCollapsed,\n      ghostHighlight,\n      isAreaSelectionInProgress\n    } = this.state;\n    const highlightInProgress = !isCollapsed || ghostHighlight;\n    if (highlightInProgress || isAreaSelectionInProgress) {\n      return;\n    }\n    this.setTip(highlight.position, content);\n  }\n  scaledPositionToViewport({\n    pageNumber,\n    boundingRect,\n    rects,\n    usePdfCoordinates\n  }) {\n    const viewport = this.viewer.getPageView(pageNumber - 1).viewport;\n    return {\n      boundingRect: scaledToViewport(boundingRect, viewport, usePdfCoordinates),\n      rects: (rects || []).map(rect => scaledToViewport(rect, viewport, usePdfCoordinates)),\n      pageNumber\n    };\n  }\n  viewportPositionToScaled({\n    pageNumber,\n    boundingRect,\n    rects\n  }) {\n    const viewport = this.viewer.getPageView(pageNumber - 1).viewport;\n    return {\n      boundingRect: viewportToScaled(boundingRect, viewport),\n      rects: (rects || []).map(rect => viewportToScaled(rect, viewport)),\n      pageNumber\n    };\n  }\n  screenshot(position, pageNumber) {\n    const canvas = this.viewer.getPageView(pageNumber - 1).canvas;\n    return getAreaAsPNG(canvas, position);\n  }\n  setTip(position, inner) {\n    this.setState({\n      tipPosition: position,\n      tipChildren: inner\n    });\n  }\n  toggleTextSelection(flag) {\n    if (!this.viewer.viewer) {\n      return;\n    }\n    this.viewer.viewer.classList.toggle(styles.disableSelection, flag);\n  }\n  render() {\n    const {\n      onSelectionFinished,\n      enableAreaSelection\n    } = this.props;\n    return /* @__PURE__ */jsx(\"div\", {\n      onPointerDown: this.onMouseDown,\n      children: /* @__PURE__ */jsxs(\"div\", {\n        ref: this.containerNodeRef,\n        className: styles.container,\n        onContextMenu: e => e.preventDefault(),\n        children: [/* @__PURE__ */jsx(\"div\", {\n          className: \"pdfViewer\"\n        }), this.renderTip(), typeof enableAreaSelection === \"function\" ? /* @__PURE__ */jsx(MouseSelection, {\n          onDragStart: () => this.toggleTextSelection(true),\n          onDragEnd: () => this.toggleTextSelection(false),\n          onChange: isVisible => this.setState({\n            isAreaSelectionInProgress: isVisible\n          }),\n          shouldStart: event => enableAreaSelection(event) && event.target instanceof Element && isHTMLElement(event.target) && Boolean(event.target.closest(\".page\")),\n          onSelection: (startTarget, boundingRect, resetSelection) => {\n            const page = getPageFromElement(startTarget);\n            if (!page) {\n              return;\n            }\n            const pageBoundingRect = {\n              ...boundingRect,\n              top: boundingRect.top - page.node.offsetTop,\n              left: boundingRect.left - page.node.offsetLeft,\n              pageNumber: page.number\n            };\n            const viewportPosition = {\n              boundingRect: pageBoundingRect,\n              rects: [],\n              pageNumber: page.number\n            };\n            const scaledPosition = this.viewportPositionToScaled(viewportPosition);\n            const image = this.screenshot(pageBoundingRect, pageBoundingRect.pageNumber);\n            this.setTip(viewportPosition, onSelectionFinished(scaledPosition, {\n              image\n            }, () => this.hideTipAndSelection(), () => {\n              console.log(\"setting ghost highlight\", scaledPosition);\n              this.setState({\n                ghostHighlight: {\n                  position: scaledPosition,\n                  content: {\n                    image\n                  }\n                }\n              }, () => {\n                resetSelection();\n                this.renderHighlightLayers();\n              });\n            }));\n          }\n        }) : null]\n      })\n    });\n  }\n  renderHighlightLayers() {\n    const {\n      pdfDocument\n    } = this.props;\n    for (let pageNumber = 1; pageNumber <= pdfDocument.numPages; pageNumber++) {\n      const highlightRoot = this.highlightRoots[pageNumber];\n      if (highlightRoot == null ? void 0 : highlightRoot.container.isConnected) {\n        this.renderHighlightLayer(highlightRoot.reactRoot, pageNumber);\n      } else {\n        const highlightLayer = this.findOrCreateHighlightLayer(pageNumber);\n        if (highlightLayer) {\n          const reactRoot = createRoot(highlightLayer);\n          this.highlightRoots[pageNumber] = {\n            reactRoot,\n            container: highlightLayer\n          };\n          this.renderHighlightLayer(reactRoot, pageNumber);\n        }\n      }\n    }\n  }\n  renderHighlightLayer(root, pageNumber) {\n    const {\n      highlightTransform,\n      highlights\n    } = this.props;\n    const {\n      tip,\n      scrolledToHighlightId\n    } = this.state;\n    root.render( /* @__PURE__ */jsx(HighlightLayer, {\n      highlightsByPage: this.groupHighlightsByPage(highlights),\n      pageNumber: pageNumber.toString(),\n      scrolledToHighlightId,\n      highlightTransform,\n      tip,\n      scaledPositionToViewport: this.scaledPositionToViewport.bind(this),\n      hideTipAndSelection: this.hideTipAndSelection.bind(this),\n      viewer: this.viewer,\n      screenshot: this.screenshot.bind(this),\n      showTip: this.showTip.bind(this),\n      setTip: tip2 => {\n        this.setState({\n          tip: tip2\n        });\n      }\n    }));\n  }\n}\n__publicField(PdfHighlighter, \"defaultProps\", {\n  pdfScaleValue: \"auto\"\n});\nexport { PdfHighlighter };","map":{"version":3,"names":["__defProp","Object","defineProperty","__defNormalProp","obj","key","value","enumerable","configurable","writable","__publicField","jsx","jsxs","React","PureComponent","createRoot","debounce","r","scaledToViewport","viewportToScaled","getAreaAsPNG","getBoundingRect","getClientRects","findOrCreateContainerLayer","getWindow","isHTMLElement","getPagesFromRange","getPageFromElement","styles","HighlightLayer","MouseSelection","TipContainer","EMPTY_ID","PdfHighlighter","constructor","props","ghostHighlight","isCollapsed","range","scrolledToHighlightId","isAreaSelectionInProgress","tip","tipPosition","tipChildren","eventBus","_a","resizeObserver","observer","containerNode","containerNodeRef","current","unsubscribe","ownerDocument","doc","on","onTextLayerRendered","onDocumentReady","addEventListener","onSelectionChange","handleKeyDown","defaultView","debouncedScaleValue","observe","_a2","off","removeEventListener","disconnect","setState","renderHighlightLayers","state","boundingRect","pageNumber","page","node","viewer","getPageView","div","pageBoundingClientRect","getBoundingClientRect","pageBoundingRect","bottom","height","left","right","top","width","x","y","scrollTop","container","style","offsetLeft","offsetTop","children","highlight","usePdfCoordinates","position","onScroll","pageViewport","viewport","scrollMargin","scrollPageIntoView","destArray","name","convertToPdfPoint","id","setTimeout","scrollRef","handleScaleValue","scrollTo","selection","getSelection","rangeCount","getRangeAt","contains","commonAncestorContainer","debouncedAfterSelection","onScrollChange","event","target","Element","closest","hideTipAndSelection","code","onSelectionFinished","pages","length","rects","viewportPosition","number","content","text","toString","scaledPosition","viewportPositionToScaled","setTip","afterSelection","currentScaleValue","pdfScaleValue","ResizeObserver","createRef","componentDidMount","init","componentDidUpdate","prevProps","pdfDocument","highlights","pdfjs","EventBus","linkService","PDFLinkService","externalLinkTarget","Error","PDFViewer","textLayerMode","removePageBorders","setDocument","setViewer","attachRef","componentWillUnmount","findOrCreateHighlightLayer","textLayer","highlightLayer","groupHighlightsByPage","allHighlights","filter","Boolean","pageNumbers","Set","add","rect","groupedHighlights","pageSpecificHighlight","anyRectsOnPage","push","showTip","highlightInProgress","scaledPositionToViewport","map","screenshot","canvas","inner","toggleTextSelection","flag","classList","toggle","disableSelection","render","enableAreaSelection","onPointerDown","onMouseDown","ref","className","onContextMenu","e","preventDefault","renderTip","onDragStart","onDragEnd","onChange","isVisible","shouldStart","onSelection","startTarget","resetSelection","image","console","log","numPages","highlightRoot","highlightRoots","isConnected","renderHighlightLayer","reactRoot","root","highlightTransform","highlightsByPage","bind","tip2"],"sources":["/Users/philipp/Documents/intership-projects-2025-main/frontend/node_modules/react-pdf-highlighter/dist/src/components/PdfHighlighter.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nimport React, { PureComponent } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport { debounce as r } from \"../../node_modules/ts-debounce/dist/src/index.esm.js\";\nimport { scaledToViewport, viewportToScaled } from \"../lib/coordinates.js\";\nimport { getAreaAsPNG } from \"../lib/get-area-as-png.js\";\nimport { getBoundingRect } from \"../lib/get-bounding-rect.js\";\nimport { getClientRects } from \"../lib/get-client-rects.js\";\nimport { findOrCreateContainerLayer, getWindow, isHTMLElement, getPagesFromRange, getPageFromElement } from \"../lib/pdfjs-dom.js\";\nimport styles from \"../style/PdfHighlighter.module.css.js\";\nimport { HighlightLayer } from \"./HighlightLayer.js\";\nimport { MouseSelection } from \"./MouseSelection.js\";\nimport { TipContainer } from \"./TipContainer.js\";\nconst EMPTY_ID = \"empty-id\";\nclass PdfHighlighter extends PureComponent {\n  constructor(props) {\n    super(props);\n    __publicField(this, \"state\", {\n      ghostHighlight: null,\n      isCollapsed: true,\n      range: null,\n      scrolledToHighlightId: EMPTY_ID,\n      isAreaSelectionInProgress: false,\n      tip: null,\n      tipPosition: null,\n      tipChildren: null\n    });\n    __publicField(this, \"viewer\");\n    __publicField(this, \"resizeObserver\", null);\n    __publicField(this, \"containerNode\", null);\n    __publicField(this, \"containerNodeRef\");\n    __publicField(this, \"highlightRoots\", {});\n    __publicField(this, \"unsubscribe\", () => {\n    });\n    __publicField(this, \"attachRef\", (eventBus) => {\n      var _a;\n      const { resizeObserver: observer } = this;\n      this.containerNode = this.containerNodeRef.current;\n      this.unsubscribe();\n      if (this.containerNode) {\n        const { ownerDocument: doc } = this.containerNode;\n        eventBus.on(\"textlayerrendered\", this.onTextLayerRendered);\n        eventBus.on(\"pagesinit\", this.onDocumentReady);\n        doc.addEventListener(\"selectionchange\", this.onSelectionChange);\n        doc.addEventListener(\"keydown\", this.handleKeyDown);\n        (_a = doc.defaultView) == null ? void 0 : _a.addEventListener(\"resize\", this.debouncedScaleValue);\n        if (observer) observer.observe(this.containerNode);\n        this.unsubscribe = () => {\n          var _a2;\n          eventBus.off(\"pagesinit\", this.onDocumentReady);\n          eventBus.off(\"textlayerrendered\", this.onTextLayerRendered);\n          doc.removeEventListener(\"selectionchange\", this.onSelectionChange);\n          doc.removeEventListener(\"keydown\", this.handleKeyDown);\n          (_a2 = doc.defaultView) == null ? void 0 : _a2.removeEventListener(\n            \"resize\",\n            this.debouncedScaleValue\n          );\n          if (observer) observer.disconnect();\n        };\n      }\n    });\n    __publicField(this, \"hideTipAndSelection\", () => {\n      this.setState({\n        tipPosition: null,\n        tipChildren: null\n      });\n      this.setState(\n        { ghostHighlight: null, tip: null },\n        () => this.renderHighlightLayers()\n      );\n    });\n    __publicField(this, \"renderTip\", () => {\n      const { tipPosition, tipChildren } = this.state;\n      if (!tipPosition) return null;\n      const { boundingRect, pageNumber } = tipPosition;\n      const page = {\n        node: this.viewer.getPageView((boundingRect.pageNumber || pageNumber) - 1).div,\n        pageNumber: boundingRect.pageNumber || pageNumber\n      };\n      const pageBoundingClientRect = page.node.getBoundingClientRect();\n      const pageBoundingRect = {\n        bottom: pageBoundingClientRect.bottom,\n        height: pageBoundingClientRect.height,\n        left: pageBoundingClientRect.left,\n        right: pageBoundingClientRect.right,\n        top: pageBoundingClientRect.top,\n        width: pageBoundingClientRect.width,\n        x: pageBoundingClientRect.x,\n        y: pageBoundingClientRect.y,\n        pageNumber: page.pageNumber\n      };\n      return /* @__PURE__ */ jsx(\n        TipContainer,\n        {\n          scrollTop: this.viewer.container.scrollTop,\n          pageBoundingRect,\n          style: {\n            left: page.node.offsetLeft + boundingRect.left + boundingRect.width / 2,\n            top: boundingRect.top + page.node.offsetTop,\n            bottom: boundingRect.top + page.node.offsetTop + boundingRect.height\n          },\n          children: tipChildren\n        }\n      );\n    });\n    __publicField(this, \"onTextLayerRendered\", () => {\n      this.renderHighlightLayers();\n    });\n    __publicField(this, \"scrollTo\", (highlight) => {\n      const { pageNumber, boundingRect, usePdfCoordinates } = highlight.position;\n      this.viewer.container.removeEventListener(\"scroll\", this.onScroll);\n      const pageViewport = this.viewer.getPageView(pageNumber - 1).viewport;\n      const scrollMargin = 10;\n      this.viewer.scrollPageIntoView({\n        pageNumber,\n        destArray: [\n          null,\n          { name: \"XYZ\" },\n          ...pageViewport.convertToPdfPoint(\n            0,\n            scaledToViewport(boundingRect, pageViewport, usePdfCoordinates).top - scrollMargin\n          ),\n          0\n        ]\n      });\n      this.setState(\n        {\n          scrolledToHighlightId: highlight.id\n        },\n        () => this.renderHighlightLayers()\n      );\n      setTimeout(() => {\n        this.viewer.container.addEventListener(\"scroll\", this.onScroll);\n      }, 100);\n    });\n    __publicField(this, \"onDocumentReady\", () => {\n      const { scrollRef } = this.props;\n      this.handleScaleValue();\n      scrollRef(this.scrollTo);\n    });\n    __publicField(this, \"onSelectionChange\", () => {\n      const container = this.containerNode;\n      if (!container) {\n        return;\n      }\n      const selection = getWindow(container).getSelection();\n      if (!selection) {\n        return;\n      }\n      const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n      if (selection.isCollapsed) {\n        this.setState({ isCollapsed: true });\n        return;\n      }\n      if (!range || !container || !container.contains(range.commonAncestorContainer)) {\n        return;\n      }\n      this.setState({\n        isCollapsed: false,\n        range\n      });\n      this.debouncedAfterSelection();\n    });\n    __publicField(this, \"onScroll\", () => {\n      const { onScrollChange } = this.props;\n      onScrollChange();\n      this.setState(\n        {\n          scrolledToHighlightId: EMPTY_ID\n        },\n        () => this.renderHighlightLayers()\n      );\n      this.viewer.container.removeEventListener(\"scroll\", this.onScroll);\n    });\n    __publicField(this, \"onMouseDown\", (event) => {\n      if (!(event.target instanceof Element) || !isHTMLElement(event.target)) {\n        return;\n      }\n      if (event.target.closest(\"#PdfHighlighter__tip-container\")) {\n        return;\n      }\n      this.hideTipAndSelection();\n    });\n    __publicField(this, \"handleKeyDown\", (event) => {\n      if (event.code === \"Escape\") {\n        this.hideTipAndSelection();\n      }\n    });\n    __publicField(this, \"afterSelection\", () => {\n      const { onSelectionFinished } = this.props;\n      const { isCollapsed, range } = this.state;\n      if (!range || isCollapsed) {\n        return;\n      }\n      const pages = getPagesFromRange(range);\n      if (!pages || pages.length === 0) {\n        return;\n      }\n      const rects = getClientRects(range, pages);\n      if (rects.length === 0) {\n        return;\n      }\n      const boundingRect = getBoundingRect(rects);\n      const viewportPosition = {\n        boundingRect,\n        rects,\n        pageNumber: pages[0].number\n      };\n      const content = {\n        text: range.toString()\n      };\n      const scaledPosition = this.viewportPositionToScaled(viewportPosition);\n      this.setTip(\n        viewportPosition,\n        onSelectionFinished(\n          scaledPosition,\n          content,\n          () => this.hideTipAndSelection(),\n          () => this.setState(\n            {\n              ghostHighlight: { position: scaledPosition }\n            },\n            () => this.renderHighlightLayers()\n          )\n        )\n      );\n    });\n    __publicField(this, \"debouncedAfterSelection\", r(this.afterSelection, 500));\n    __publicField(this, \"handleScaleValue\", () => {\n      if (this.viewer) {\n        this.viewer.currentScaleValue = this.props.pdfScaleValue;\n      }\n    });\n    __publicField(this, \"debouncedScaleValue\", r(this.handleScaleValue, 500));\n    if (typeof ResizeObserver !== \"undefined\") {\n      this.resizeObserver = new ResizeObserver(this.debouncedScaleValue);\n    }\n    this.containerNodeRef = React.createRef();\n  }\n  componentDidMount() {\n    this.init();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.pdfDocument !== this.props.pdfDocument) {\n      this.init();\n      return;\n    }\n    if (prevProps.highlights !== this.props.highlights) {\n      this.renderHighlightLayers();\n    }\n  }\n  async init() {\n    const { pdfDocument } = this.props;\n    const pdfjs = await import(\"../../node_modules/pdfjs-dist/web/pdf_viewer.js\");\n    const eventBus = new pdfjs.EventBus();\n    const linkService = new pdfjs.PDFLinkService({\n      eventBus,\n      externalLinkTarget: 2\n    });\n    if (!this.containerNodeRef.current) {\n      throw new Error(\"!\");\n    }\n    this.viewer = this.viewer || new pdfjs.PDFViewer({\n      container: this.containerNodeRef.current,\n      eventBus,\n      // enhanceTextSelection: true, // deprecated. https://github.com/mozilla/pdf.js/issues/9943#issuecomment-409369485\n      textLayerMode: 2,\n      removePageBorders: true,\n      linkService\n    });\n    linkService.setDocument(pdfDocument);\n    linkService.setViewer(this.viewer);\n    this.viewer.setDocument(pdfDocument);\n    this.attachRef(eventBus);\n  }\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n  findOrCreateHighlightLayer(page) {\n    const { textLayer } = this.viewer.getPageView(page - 1) || {};\n    if (!textLayer) {\n      return null;\n    }\n    return findOrCreateContainerLayer(\n      textLayer.div,\n      `PdfHighlighter__highlight-layer ${styles.highlightLayer}`,\n      \".PdfHighlighter__highlight-layer\"\n    );\n  }\n  groupHighlightsByPage(highlights) {\n    const { ghostHighlight } = this.state;\n    const allHighlights = [...highlights, ghostHighlight].filter(\n      Boolean\n    );\n    const pageNumbers = /* @__PURE__ */ new Set();\n    for (const highlight of allHighlights) {\n      pageNumbers.add(highlight.position.pageNumber);\n      for (const rect of highlight.position.rects) {\n        if (rect.pageNumber) {\n          pageNumbers.add(rect.pageNumber);\n        }\n      }\n    }\n    const groupedHighlights = {};\n    for (const pageNumber of pageNumbers) {\n      groupedHighlights[pageNumber] = groupedHighlights[pageNumber] || [];\n      for (const highlight of allHighlights) {\n        const pageSpecificHighlight = {\n          ...highlight,\n          position: {\n            pageNumber,\n            boundingRect: highlight.position.boundingRect,\n            rects: [],\n            usePdfCoordinates: highlight.position.usePdfCoordinates\n          }\n        };\n        let anyRectsOnPage = false;\n        for (const rect of highlight.position.rects) {\n          if (pageNumber === (rect.pageNumber || highlight.position.pageNumber)) {\n            pageSpecificHighlight.position.rects.push(rect);\n            anyRectsOnPage = true;\n          }\n        }\n        if (anyRectsOnPage || pageNumber === highlight.position.pageNumber) {\n          groupedHighlights[pageNumber].push(pageSpecificHighlight);\n        }\n      }\n    }\n    return groupedHighlights;\n  }\n  showTip(highlight, content) {\n    const { isCollapsed, ghostHighlight, isAreaSelectionInProgress } = this.state;\n    const highlightInProgress = !isCollapsed || ghostHighlight;\n    if (highlightInProgress || isAreaSelectionInProgress) {\n      return;\n    }\n    this.setTip(highlight.position, content);\n  }\n  scaledPositionToViewport({\n    pageNumber,\n    boundingRect,\n    rects,\n    usePdfCoordinates\n  }) {\n    const viewport = this.viewer.getPageView(pageNumber - 1).viewport;\n    return {\n      boundingRect: scaledToViewport(boundingRect, viewport, usePdfCoordinates),\n      rects: (rects || []).map(\n        (rect) => scaledToViewport(rect, viewport, usePdfCoordinates)\n      ),\n      pageNumber\n    };\n  }\n  viewportPositionToScaled({\n    pageNumber,\n    boundingRect,\n    rects\n  }) {\n    const viewport = this.viewer.getPageView(pageNumber - 1).viewport;\n    return {\n      boundingRect: viewportToScaled(boundingRect, viewport),\n      rects: (rects || []).map((rect) => viewportToScaled(rect, viewport)),\n      pageNumber\n    };\n  }\n  screenshot(position, pageNumber) {\n    const canvas = this.viewer.getPageView(pageNumber - 1).canvas;\n    return getAreaAsPNG(canvas, position);\n  }\n  setTip(position, inner) {\n    this.setState({\n      tipPosition: position,\n      tipChildren: inner\n    });\n  }\n  toggleTextSelection(flag) {\n    if (!this.viewer.viewer) {\n      return;\n    }\n    this.viewer.viewer.classList.toggle(styles.disableSelection, flag);\n  }\n  render() {\n    const { onSelectionFinished, enableAreaSelection } = this.props;\n    return /* @__PURE__ */ jsx(\"div\", { onPointerDown: this.onMouseDown, children: /* @__PURE__ */ jsxs(\n      \"div\",\n      {\n        ref: this.containerNodeRef,\n        className: styles.container,\n        onContextMenu: (e) => e.preventDefault(),\n        children: [\n          /* @__PURE__ */ jsx(\"div\", { className: \"pdfViewer\" }),\n          this.renderTip(),\n          typeof enableAreaSelection === \"function\" ? /* @__PURE__ */ jsx(\n            MouseSelection,\n            {\n              onDragStart: () => this.toggleTextSelection(true),\n              onDragEnd: () => this.toggleTextSelection(false),\n              onChange: (isVisible) => this.setState({ isAreaSelectionInProgress: isVisible }),\n              shouldStart: (event) => enableAreaSelection(event) && event.target instanceof Element && isHTMLElement(event.target) && Boolean(event.target.closest(\".page\")),\n              onSelection: (startTarget, boundingRect, resetSelection) => {\n                const page = getPageFromElement(startTarget);\n                if (!page) {\n                  return;\n                }\n                const pageBoundingRect = {\n                  ...boundingRect,\n                  top: boundingRect.top - page.node.offsetTop,\n                  left: boundingRect.left - page.node.offsetLeft,\n                  pageNumber: page.number\n                };\n                const viewportPosition = {\n                  boundingRect: pageBoundingRect,\n                  rects: [],\n                  pageNumber: page.number\n                };\n                const scaledPosition = this.viewportPositionToScaled(viewportPosition);\n                const image = this.screenshot(\n                  pageBoundingRect,\n                  pageBoundingRect.pageNumber\n                );\n                this.setTip(\n                  viewportPosition,\n                  onSelectionFinished(\n                    scaledPosition,\n                    { image },\n                    () => this.hideTipAndSelection(),\n                    () => {\n                      console.log(\"setting ghost highlight\", scaledPosition);\n                      this.setState(\n                        {\n                          ghostHighlight: {\n                            position: scaledPosition,\n                            content: { image }\n                          }\n                        },\n                        () => {\n                          resetSelection();\n                          this.renderHighlightLayers();\n                        }\n                      );\n                    }\n                  )\n                );\n              }\n            }\n          ) : null\n        ]\n      }\n    ) });\n  }\n  renderHighlightLayers() {\n    const { pdfDocument } = this.props;\n    for (let pageNumber = 1; pageNumber <= pdfDocument.numPages; pageNumber++) {\n      const highlightRoot = this.highlightRoots[pageNumber];\n      if (highlightRoot == null ? void 0 : highlightRoot.container.isConnected) {\n        this.renderHighlightLayer(highlightRoot.reactRoot, pageNumber);\n      } else {\n        const highlightLayer = this.findOrCreateHighlightLayer(pageNumber);\n        if (highlightLayer) {\n          const reactRoot = createRoot(highlightLayer);\n          this.highlightRoots[pageNumber] = {\n            reactRoot,\n            container: highlightLayer\n          };\n          this.renderHighlightLayer(reactRoot, pageNumber);\n        }\n      }\n    }\n  }\n  renderHighlightLayer(root, pageNumber) {\n    const { highlightTransform, highlights } = this.props;\n    const { tip, scrolledToHighlightId } = this.state;\n    root.render(\n      /* @__PURE__ */ jsx(\n        HighlightLayer,\n        {\n          highlightsByPage: this.groupHighlightsByPage(highlights),\n          pageNumber: pageNumber.toString(),\n          scrolledToHighlightId,\n          highlightTransform,\n          tip,\n          scaledPositionToViewport: this.scaledPositionToViewport.bind(this),\n          hideTipAndSelection: this.hideTipAndSelection.bind(this),\n          viewer: this.viewer,\n          screenshot: this.screenshot.bind(this),\n          showTip: this.showTip.bind(this),\n          setTip: (tip2) => {\n            this.setState({ tip: tip2 });\n          }\n        }\n      )\n    );\n  }\n}\n__publicField(PdfHighlighter, \"defaultProps\", {\n  pdfScaleValue: \"auto\"\n});\nexport {\n  PdfHighlighter\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { jsx } from \"react/jsx-runtime\";\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport { isHTMLElement } from \"../lib/pdfjs-dom.js\";\nimport styles from \"../style/MouseSelection.module.css.js\";\nconst getBoundingRect = (start, end) => ({\n  left: Math.min(end.x, start.x),\n  top: Math.min(end.y, start.y),\n  width: Math.abs(end.x - start.x),\n  height: Math.abs(end.y - start.y)\n});\nconst shouldRender = boundingRect => boundingRect.width >= 1 && boundingRect.height >= 1;\nfunction MouseSelection({\n  onSelection,\n  onDragStart,\n  onDragEnd,\n  shouldStart,\n  onChange\n}) {\n  const [locked, setLocked] = useState(false);\n  const [start, setStart] = useState(null);\n  const [end, setEnd] = useState(null);\n  const rootRef = useRef(null);\n  const startRef = useRef(start);\n  const lockedRef = useRef(locked);\n  useEffect(() => {\n    startRef.current = start;\n  }, [start]);\n  useEffect(() => {\n    lockedRef.current = locked;\n  }, [locked]);\n  const reset = useCallback(() => {\n    onDragEnd();\n    setStart(null);\n    setEnd(null);\n    setLocked(false);\n  }, [onDragEnd]);\n  useEffect(() => {\n    const isVisible = Boolean(start && end);\n    onChange(isVisible);\n  }, [start, end, onChange]);\n  useEffect(() => {\n    const root = rootRef.current;\n    if (!root) {\n      return;\n    }\n    const container = root.parentElement;\n    if (!container || !isHTMLElement(container)) {\n      return;\n    }\n    const containerCoords = (pageX, pageY) => {\n      const containerBoundingRect = container.getBoundingClientRect();\n      return {\n        x: pageX - containerBoundingRect.left + container.scrollLeft,\n        y: pageY - containerBoundingRect.top + container.scrollTop - window.scrollY\n      };\n    };\n    const mouseMoveHandler = event => {\n      if (!startRef.current || lockedRef.current) {\n        return;\n      }\n      setEnd(containerCoords(event.pageX, event.pageY));\n    };\n    const mouseDownHandler = event => {\n      if (!shouldStart(event)) {\n        reset();\n        return;\n      }\n      const startTarget = event.target;\n      if (!(startTarget instanceof Element) || !isHTMLElement(startTarget)) {\n        return;\n      }\n      onDragStart();\n      setStart(containerCoords(event.pageX, event.pageY));\n      setEnd(null);\n      setLocked(false);\n      const mouseUpHandler = event2 => {\n        var _a;\n        (_a = event2.currentTarget) == null ? void 0 : _a.removeEventListener(\"mouseup\", mouseUpHandler);\n        const currentStart = startRef.current;\n        if (!currentStart) {\n          return;\n        }\n        if (!(event2 instanceof MouseEvent)) {\n          return;\n        }\n        const endCoords = containerCoords(event2.pageX, event2.pageY);\n        const boundingRect = getBoundingRect(currentStart, endCoords);\n        if (!(event2.target instanceof Element) || !isHTMLElement(event2.target) || !container.contains(event2.target) || !shouldRender(boundingRect)) {\n          reset();\n          return;\n        }\n        setEnd(endCoords);\n        setLocked(true);\n        onSelection(startTarget, boundingRect, reset);\n        onDragEnd();\n      };\n      const doc = container.ownerDocument;\n      if (doc == null ? void 0 : doc.body) {\n        doc.body.addEventListener(\"mouseup\", mouseUpHandler);\n      }\n    };\n    container.addEventListener(\"mousemove\", mouseMoveHandler);\n    container.addEventListener(\"mousedown\", mouseDownHandler);\n    return () => {\n      container.removeEventListener(\"mousemove\", mouseMoveHandler);\n      container.removeEventListener(\"mousedown\", mouseDownHandler);\n    };\n  }, [shouldStart, onDragStart, onDragEnd, onSelection, reset]);\n  return /* @__PURE__ */jsx(\"div\", {\n    ref: rootRef,\n    children: start && end && /* @__PURE__ */jsx(\"div\", {\n      className: styles.mouseSelection,\n      style: getBoundingRect(start, end)\n    })\n  });\n}\nexport { MouseSelection };","map":{"version":3,"names":["jsx","useState","useRef","useEffect","useCallback","isHTMLElement","styles","getBoundingRect","start","end","left","Math","min","x","top","y","width","abs","height","shouldRender","boundingRect","MouseSelection","onSelection","onDragStart","onDragEnd","shouldStart","onChange","locked","setLocked","setStart","setEnd","rootRef","startRef","lockedRef","current","reset","isVisible","Boolean","root","container","parentElement","containerCoords","pageX","pageY","containerBoundingRect","getBoundingClientRect","scrollLeft","scrollTop","window","scrollY","mouseMoveHandler","event","mouseDownHandler","startTarget","target","Element","mouseUpHandler","event2","_a","currentTarget","removeEventListener","currentStart","MouseEvent","endCoords","contains","doc","ownerDocument","body","addEventListener","ref","children","className","mouseSelection","style"],"sources":["/Users/philipp/Documents/intership-projects-2025-main/frontend/node_modules/react-pdf-highlighter/dist/src/components/MouseSelection.js"],"sourcesContent":["import { jsx } from \"react/jsx-runtime\";\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport { isHTMLElement } from \"../lib/pdfjs-dom.js\";\nimport styles from \"../style/MouseSelection.module.css.js\";\nconst getBoundingRect = (start, end) => ({\n  left: Math.min(end.x, start.x),\n  top: Math.min(end.y, start.y),\n  width: Math.abs(end.x - start.x),\n  height: Math.abs(end.y - start.y)\n});\nconst shouldRender = (boundingRect) => boundingRect.width >= 1 && boundingRect.height >= 1;\nfunction MouseSelection({\n  onSelection,\n  onDragStart,\n  onDragEnd,\n  shouldStart,\n  onChange\n}) {\n  const [locked, setLocked] = useState(false);\n  const [start, setStart] = useState(null);\n  const [end, setEnd] = useState(null);\n  const rootRef = useRef(null);\n  const startRef = useRef(start);\n  const lockedRef = useRef(locked);\n  useEffect(() => {\n    startRef.current = start;\n  }, [start]);\n  useEffect(() => {\n    lockedRef.current = locked;\n  }, [locked]);\n  const reset = useCallback(() => {\n    onDragEnd();\n    setStart(null);\n    setEnd(null);\n    setLocked(false);\n  }, [onDragEnd]);\n  useEffect(() => {\n    const isVisible = Boolean(start && end);\n    onChange(isVisible);\n  }, [start, end, onChange]);\n  useEffect(() => {\n    const root = rootRef.current;\n    if (!root) {\n      return;\n    }\n    const container = root.parentElement;\n    if (!container || !isHTMLElement(container)) {\n      return;\n    }\n    const containerCoords = (pageX, pageY) => {\n      const containerBoundingRect = container.getBoundingClientRect();\n      return {\n        x: pageX - containerBoundingRect.left + container.scrollLeft,\n        y: pageY - containerBoundingRect.top + container.scrollTop - window.scrollY\n      };\n    };\n    const mouseMoveHandler = (event) => {\n      if (!startRef.current || lockedRef.current) {\n        return;\n      }\n      setEnd(containerCoords(event.pageX, event.pageY));\n    };\n    const mouseDownHandler = (event) => {\n      if (!shouldStart(event)) {\n        reset();\n        return;\n      }\n      const startTarget = event.target;\n      if (!(startTarget instanceof Element) || !isHTMLElement(startTarget)) {\n        return;\n      }\n      onDragStart();\n      setStart(containerCoords(event.pageX, event.pageY));\n      setEnd(null);\n      setLocked(false);\n      const mouseUpHandler = (event2) => {\n        var _a;\n        (_a = event2.currentTarget) == null ? void 0 : _a.removeEventListener(\"mouseup\", mouseUpHandler);\n        const currentStart = startRef.current;\n        if (!currentStart) {\n          return;\n        }\n        if (!(event2 instanceof MouseEvent)) {\n          return;\n        }\n        const endCoords = containerCoords(event2.pageX, event2.pageY);\n        const boundingRect = getBoundingRect(currentStart, endCoords);\n        if (!(event2.target instanceof Element) || !isHTMLElement(event2.target) || !container.contains(event2.target) || !shouldRender(boundingRect)) {\n          reset();\n          return;\n        }\n        setEnd(endCoords);\n        setLocked(true);\n        onSelection(startTarget, boundingRect, reset);\n        onDragEnd();\n      };\n      const doc = container.ownerDocument;\n      if (doc == null ? void 0 : doc.body) {\n        doc.body.addEventListener(\"mouseup\", mouseUpHandler);\n      }\n    };\n    container.addEventListener(\"mousemove\", mouseMoveHandler);\n    container.addEventListener(\"mousedown\", mouseDownHandler);\n    return () => {\n      container.removeEventListener(\"mousemove\", mouseMoveHandler);\n      container.removeEventListener(\"mousedown\", mouseDownHandler);\n    };\n  }, [shouldStart, onDragStart, onDragEnd, onSelection, reset]);\n  return /* @__PURE__ */ jsx(\"div\", { ref: rootRef, children: start && end && /* @__PURE__ */ jsx(\n    \"div\",\n    {\n      className: styles.mouseSelection,\n      style: getBoundingRect(start, end)\n    }\n  ) });\n}\nexport {\n  MouseSelection\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}